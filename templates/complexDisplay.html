{% extends "base.html" %}
{% load static %}
{% block title %}
  {{ cities.0.name }} Complexes
{% endblock title %}
{% block head %}
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>


  <style>
    #CitiesContent {
        padding-top: 2%;
        margin: 1%;
        background-color: #5daaf3;
    }

    #rowgutter {
        margin-right: 0px;
    }

    #fixed {
        position: fixed;
        top: 25px;
        width: 100%;
        background-color: white;
    }

    #scrolldiv {
        height: 80vh;
        width: 100%;
    }

    #yellowdiv {
        background-color: yellow;
        height: 75px;
        width: 100%;
    }

    #orangediv {
        background-color: orange;
        height: 700px;
        width: 100%;
    }
  </style>
  <script src="{% static 'js/map.js' %}"></script>
  <link rel="stylesheet" href="{% static 'css/map.css' %}"/>
{% endblock head %}
{% block content %}
  <div class="container-fluid overflow-auto">
    <div class="row justify-content-center"
         id="rowgutter"
         style="margin-top:50px">
      <div class="col-8" style="background-color: #FFFF;">
        <div class="row">
          <div id="yellowdiv"></div>
          {% comment %} Map Bar {% endcomment %}
        </div>
        <div class="row" style="margin-top:10px">
          <div id="map"></div><!-- 
          <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTFZkId5gqVD4NKLKZw-qZR3HJq_ZcSnM&callback=initMap"
              type="text/javascript"></script> -->


          <!-- <script>
            (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
              key: "AIzaSyDTFZkId5gqVD4NKLKZw-qZR3HJq_ZcSnM",
              // Add other bootstrap parameters as needed, using camel case.
              // Use the 'v' parameter to indicate the version to load (alpha, beta, weekly, etc.)
            });
          </script>            {% comment %} Map {% endcomment %} -->
        
            <div id="map_canvas" style="height: 354px; width:713px;"></div>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTFZkId5gqVD4NKLKZw-qZR3HJq_ZcSnM&callback=initMap"></script>
<script>
var directionsDisplay,
    directionsService ;

function initMap() {
  var directionsService = new google.maps.DirectionsService();
  directionsDisplay = new google.maps.DirectionsRenderer();
  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
  var mapOptions = { zoom:7, mapTypeId: google.maps.MapTypeId.ROADMAP, center: chicago }
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
  directionsDisplay.setMap(map);
}

</script>
          </div>
      </div>
      <div class="col justify-content-center">
        <div class="row" style="text-align:center">
          <h3>Complexes In {{ cities.0.name }}</h3>
        </div>
        <div class="row overflow-scroll" id="scrolldiv" style="margin-top:10px">
          {% for city in cities %}
            <div class="row">
              <div class="col border text-center rounded-4"
                   id="CitiesContent"
                   style="border-radius:80px">
                <a href="{{ city.id }}" style="color:black">
                  <p>{{ city.complex_name }}, {{ city.address }}, {{ city.zipcode }}</p>
                </a>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
